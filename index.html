<!DOCTYPE html>
<style>
 @import url('https://fonts.googleapis.com/css2?family=Prata&display=swap');
  
  body {
    text-align: center;
    background-color: blue;
    font-family: "Prata", serif;
    font-style: italic;
  }
  
  #musBtn {
    background-color: white;
    color: black;
  }
  
  #header {
    color: white;
    font-size: 75px;
  }
  
  #header2 {
    color: white;
    font-size: 28px;
  }
  
  #buto {
    text-align: center;
    color: white;
    font-size: 60px;
    margin: 0;
  	position: inline-block;
  	top: 75%;
  	-ms-transform: translateY(-75%);
  	transform: translateY(-75%);
  }

</style>

<html lang="en-US">
	<h1 id="header"></h1>
  <h3 id="header2"></h3>
  <br><br><br>
  <img id="image" width="400px" alt="gif depicting the weather">
  <br><br><br><br>
  <div id="buto">
    " <input type="button" id="musBtn" value="hear today">"
  </div>
</html>

<script>


  
 async function getWeather () {
   
   //retreiving weather info + location info 
  const gpsURL = 'https://location.services.mozilla.com/v1/geolocate?key=test'
  const gpsReq = await window.fetch(gpsURL)
  const gps = await gpsReq.json()
  const url = `https://api.weatherbit.io/v2.0/current?units=I&lat=${gps.location.lat}&lon=${gps.location.lng}&key=5c3c4259df534414b6c2ee063f50cead&`
  const req = await window.fetch(url)
  const info = await req.json()
  
  //converting temp and description info to strings
  const temp = JSON.stringify(info.data[0].temp)
  const descriptionObj = info.data[0].weather.description
  const description = JSON.stringify(descriptionObj)
  
  //updating sub-header with temp and description
  const head2 = document.getElementById("header2")
  head2.innerHTML = description + "<br>" + temp + "Â°"
  console.log(info)
   
  //generate gif based off of cloud/rain conditions
  const snowGifURL = 'https://www.animationsoftware7.com/img/agifs/snow02.gif'
  const rainGifURL = 'https://media3.giphy.com/media/Wmp1EOzVybWd13s5DB/giphy.gif?cid=6c09b952edmxxjg0mppraizn3dk5wq07cnbpi22m7xbgehkt&ep=v1_stickers_related&rid=giphy.gif&ct=s'
  const cloudyGifURL = 'https://i.gifer.com/3F3I.gif'
  const sunnyGifURL = 'https://media1.giphy.com/media/aL1WOMnoxfC8w/giphy.gif'
  const snow = info.data[0].snow
  const rain = info.data[0].precip
  const cloud = info.data[0].clouds
  const centerImg = document.getElementById("image")
  
  if (snow > 0.04) {
    centerImg.src = snowGifURL;
  } else if (rain > 0.1) {
    centerImg.src = rainGifURL;
 	} else if (cloud > 80) {
    centerImg.src = cloudyGifURL;
  } else {
    centerImg.src = sunnyGifURL
  }
  
  
   
} 

function greet () {
  const hr = (new Date()).getHours();
  const head = document.getElementById("header");
  
  let greeting = {}  
  	if (hr < 12) {
    greeting = "good morning";
  } else if (hr < 17) {
    greeting = "good afternoon";
  } else {
    greeting = "good evening";
  }
  head.innerHTML = greeting;
}
  


function init () {
  greet();
  getWeather();
}

  
	window.addEventListener('load', init)
</script>